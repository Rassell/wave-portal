(this["webpackJsonpmy-wave-portal-client"]=this["webpackJsonpmy-wave-portal-client"]||[]).push([[0],{22:function(e){e.exports=JSON.parse('{"a":[{"inputs":[],"stateMutability":"payable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":false,"internalType":"uint256","name":"timestamp","type":"uint256"},{"indexed":false,"internalType":"string","name":"message","type":"string"}],"name":"NewWave","type":"event"},{"inputs":[],"name":"getAllWaves","outputs":[{"components":[{"internalType":"address","name":"waver","type":"address"},{"internalType":"string","name":"message","type":"string"},{"internalType":"uint256","name":"timestamp","type":"uint256"}],"internalType":"struct WavePortal.Wave[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"getTotalWaves","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"","type":"address"}],"name":"lastWavedAt","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"string","name":"_message","type":"string"}],"name":"wave","outputs":[],"stateMutability":"nonpayable","type":"function"}]}')},39:function(e,t,n){e.exports=n(58)},44:function(e,t,n){},46:function(e,t,n){},48:function(e,t){},58:function(e,t,n){"use strict";n.r(t);var a=n(6),r=n.n(a),s=n(33),o=n.n(s),c=(n(44),n(2)),i=n.n(c),u=n(20),l=n(13),p=n(24),m=n(12),d=(n(46),n(22)),v="0xc4f55d993BD92Fbd4a167F76E3236bA9ce8AB4DA";function f(){var e=Object(a.useState)(""),t=Object(p.a)(e,2),n=t[0],s=t[1],o=Object(a.useState)(""),c=Object(p.a)(o,2),f=c[0],y=c[1],g=Object(a.useState)([]),h=Object(p.a)(g,2),w=h[0],b=h[1];function x(){return k.apply(this,arguments)}function k(){return(k=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=7;break}return console.log("Make sure you have metamask!"),e.abrupt("return");case 7:console.log("We have the ethereum object",n);case 8:return e.next=10,n.request({method:"eth_accounts"});case 10:0!==(a=e.sent).length?(r=a[0],console.log("Found an authorized account:",r),y(r),j()):console.log("No authorized account found"),e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),console.log(e.t0);case 17:case"end":return e.stop()}}),e,null,[[0,14]])})))).apply(this,arguments)}function E(){return(E=Object(l.a)(i.a.mark((function e(){var t,n,a;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,n=t.ethereum){e.next=5;break}return alert("Get MetaMask!"),e.abrupt("return");case 5:return e.next=7,n.request({method:"eth_requestAccounts"});case 7:a=e.sent,console.log("Connected",a[0]),y(a[0]),e.next=15;break;case 12:e.prev=12,e.t0=e.catch(0),console.log(e.t0);case 15:case"end":return e.stop()}}),e,null,[[0,12]])})))).apply(this,arguments)}function W(){return(W=Object(l.a)(i.a.mark((function e(){var t,a,r,s,o,c,u;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(a=t.ethereum)){e.next=23;break}return r=new m.a.providers.Web3Provider(a),s=r.getSigner(),o=new m.a.Contract(v,d.a,s),e.next=8,o.getTotalWaves();case 8:return c=e.sent,console.log("Retrieved total wave count...",c.toNumber()),e.next=12,o.wave(n,{gasLimit:3e5});case 12:return u=e.sent,console.log("Mining...",u.hash),e.next=16,u.wait();case 16:return console.log("Mined -- ",u.hash),e.next=19,o.getTotalWaves();case 19:c=e.sent,console.log("Retrieved total wave count...",c.toNumber()),e.next=24;break;case 23:console.log("Ethereum object doesn't exist!");case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(0),console.log(e.t0);case 29:case"end":return e.stop()}}),e,null,[[0,26]])})))).apply(this,arguments)}function j(){return T.apply(this,arguments)}function T(){return(T=Object(l.a)(i.a.mark((function e(){var t,n,a,r,s,o,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=window,!(n=t.ethereum)){e.next=14;break}return a=new m.a.providers.Web3Provider(n),r=a.getSigner(),s=new m.a.Contract(v,d.a,r),e.next=8,s.getAllWaves();case 8:o=e.sent,c=[],o.forEach((function(e){c.push({address:e.waver,timestamp:new Date(1e3*e.timestamp),message:e.message})})),b(c),e.next=15;break;case 14:console.log("Ethereum object doesn't exist!");case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(0),console.log(e.t0);case 20:case"end":return e.stop()}}),e,null,[[0,17]])})))).apply(this,arguments)}return Object(a.useEffect)((function(){function e(){return(e=Object(l.a)(i.a.mark((function e(){var t,n,a,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:return n=function(e,t,n){console.log("NewWave",e,t,n),b((function(a){return[].concat(Object(u.a)(a),[{address:e,timestamp:new Date(1e3*t),message:n}])}))},window.ethereum&&(a=new m.a.providers.Web3Provider(window.ethereum),r=a.getSigner(),(t=new m.a.Contract(v,d.a,r)).on("NewWave",n)),e.abrupt("return",(function(){t&&t.off("NewWave",n)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]),r.a.createElement("div",{className:"mainContainer"},r.a.createElement("div",{className:"dataContainer"},r.a.createElement("div",{className:"header"},"\ud83d\udc4b Hey there!"),r.a.createElement("div",{className:"bio"},"I am farza and I worked on self-driving cars so that's pretty cool right? Connect your Ethereum wallet and wave at me!"),r.a.createElement("div",null,r.a.createElement("label",null,"Message",r.a.createElement("input",{type:"text",value:n,onChange:function(e){return s(e.target.value)}})),r.a.createElement("button",{className:"waveButton",onClick:function(){return W.apply(this,arguments)}},"Wave at Me")),!f&&r.a.createElement("button",{className:"waveButton",onClick:function(){return E.apply(this,arguments)}},"Connect Wallet"),w.map((function(e,t){return r.a.createElement("div",{key:t,style:{backgroundColor:"OldLace",marginTop:"16px",padding:"8px"}},r.a.createElement("div",null,"Address: ",e.address),r.a.createElement("div",null,"Time: ",e.timestamp.toString()),r.a.createElement("div",null,"Message: ",e.message))}))))}o.a.render(r.a.createElement(f,null),document.getElementById("root"))}},[[39,1,2]]]);
//# sourceMappingURL=main.82711927.chunk.js.map